<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>Weathon文档管理系统 | 文件导入</title>
  <link rel="stylesheet" href="./src/layui/css/layui.css">
  <script type="text/javascript" src="/eel.js"></script>
</head>


<body class="layui-layout-body">
  <div class="layui-layout layui-layout-admin">
    <div class="layui-header">
      <div class="layui-logo">Weathon文档管理系统</div>
      <!-- 头部区域（可配合l ayui已有的水平导航） -->
      <ul class="layui-nav layui-layout-left">
        <li class="layui-nav-item"><a href="./index.html">文档管理</a></li>
        <li class="layui-nav-item"><a href="./setting.html">设置</a></li>
        <li class="layui-nav-item"><a href="./search.html">文档查找</a></li>


        <!-- Menu -->
        <li class="layui-nav-item">
          <a href="javascript:;">导入</a>
          <dl class="layui-nav-child">
            <dd><a href="scan.html">从扫描仪</a></dd>
            <dd><a href="upload.html">从文件</a></dd>
          </dl>
        </li>

        <!-- Menu End -->
        <li class="layui-nav-item">
          <!--
            <a href="javascript:;">其它系统</a>
            <dl class="layui-nav-child">
              <dd><a href="">邮件管理</a></dd>
              <dd><a href="">消息管理</a></dd>
              <dd><a href="">授权管理</a></dd>
            </dl>
-->
        </li>
      </ul>
      <ul class="layui-nav layui-layout-right">
        <li class="layui-nav-item">
          <a href="javascript:;">
            <img src="cat.png" class="layui-nav-img">
            管理员
          </a>
          <dl class="layui-nav-child">
            <dd><a href="./setting.html">设置</a></dd>
            <dd><a href="./logout.html">退出系统</a></dd>
          </dl>
        </li>


    </div>
    <div class="layui-main">

      <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
        <legend>多张图片导入</legend>
      </fieldset>
      <!-- <input id="myInput" type="file" style={{visibility: 'hidden'}} webkitdirectory directory multiple/> -->
      <input id="fileselector" type="file" onchange="browseResult(event)" webkitdirectory directory multiple="false" style="display:none" />

      <div class="layui-upload">
        <button type="button" class="layui-btn" id="upload2" onclick="getElementById('fileselector').click();">选择文件夹</button>
        <br/> <br/> 
        <p style="color:red">注意：请保证您选择的目录下只有指定格式（*.png,*.jpg,*.gif）的图片，且没有子目录。</p>
        <blockquote class="layui-elem-quote layui-quote-nm" style="margin-top: 10px;">
          
              <p  id="TextBox">您还没有选择文件夹</p>

        </blockquote>
      </div>
    </div>



    <script src='./src/layui/layui.js'></script>


    <script src='./src/layui/layui.js'></script>
    <script>
      //JavaScript代码区域
      layui.use(['element'], function () {
        $ = layui.$
        ,element = layui.element;
        
      //yan jing shan guang

      });
      function browseResult(e) {
        var fileselector = document.getElementById('fileselector');
        // console.log(fileselector.value);
        // document.getElementById('TextBox').innerHtML="您选择了："+String(fileselector.value);
        // document.getElementById('upload2').innerHtML="重新选择";
        //这两种方法不行，也许上次做APP就出错在这里
        $("#TextBox").html("您选择了："+fileselector.value+"<br/><br/><button class='layui-btn' onclick='myconfirm();'>确认</button>");
        $("#upload2").text("重新选择");
      }
      async function myconfirm(){
      //   var return_value= await eel.upload(path);
      //   if (return_value == 0) {
      //     alert("任务提交成功！正在加密存储！")
      //   }
      //   else {
      //     alert("任务提交失败！请刷新后重试或记录下以下信息联系支持部门。\n" + ret)
      //   }
      // }
      //yan jing fei chang lei ,  qiang xing xie dai ma , shou bu liao, dan shi bu zheng xi jiu meijihui le
      $("#TextBox").html('正在执行任务<br/><br/><div class="layui-progress layui-progress-big" lay-filter="demo" lay-showPercent="true">\
  <div class="layui-progress-bar" lay-percent="20%"></div>\
</div>')
      //   for(var i=0;i<100;i++)
      //   {
      //     layui.lement.progress('demo', '50%');
      //   }
      }
    </script>

</body>

</html>