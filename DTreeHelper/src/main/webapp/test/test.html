<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>layui.dtree帮助手册</title>
<link rel="stylesheet" href="../layui/css/layui.css">
<script type="text/javascript" src="../layui/layui.js"></script>

<link rel="stylesheet" href="../layui_ext/dtree/dtree.css">
<link rel="stylesheet" href="../layui_ext/dtree/font/dtreefont.css">

<link rel="stylesheet" href="test.css">
<style type="text/css">
#test{position: absolute;max-height: 500px;height: 350px;overflow: auto;width: 100%;z-index: 123;display: none;border:1px solid silver;top: 42px;}
.layui-show{display: block!important;}
</style>
</head>
<body>

	<div class="container">
		<div class="layui-row layui-col-space10">
			<div class="layui-fluid">
				<div class="div_h3title">
					<i class="dtreefont dtree-icon-fenguangbaobiao"></i>
					<span>dtree 数据树文档 - layui.dtree</span>
				</div>
			</div>
			
			<div class="layui-fluid">
				<blockquote class="layui-elem-quote">测试。</blockquote>
				<blockquote class="layui-elem-quote">模块加载名称：dtree</blockquote>
			</div>
			
			<!-- <div class="layui-fluid">
				<fieldset class="layui-elem-field layui-field-title" id="yjfxk">
					<legend>示例</legend>
					<div class="layui-field-box">
						<div class="layui-row layui-col-space10" style="margin-top: 10px;">
							<div class="layui-tab" lay-filter="demo">
							  <ul class="layui-tab-title">
							    <li class="layui-this">点击我进行测试</li>
							  </ul>
							  <div class="layui-tab-content">
							    <div class="layui-tab-item layui-show">
							    	<div style="height: 450px;overflow: auto;"><ul id="testTree" class="dtree" data-id="0"></ul></div>
							    </div>
							  </div>
							</div>
						</div>
					</div>
				</fieldset>
			</div> -->
			<!-- <div class="layui-fluid">
				<fieldset class="layui-elem-field layui-field-title" id="jdybjz">
					<legend>示例</legend>
					<div class="layui-field-box">
						<div class="layui-row layui-col-space10" style="margin-top: 10px;">
							<div class="layui-col-lg4"><div style="height: 450px;overflow: auto;" id="toolbarDiv"><ul id="testTree" class="dtree" data-id="0"></ul></div></div>
							<div class="layui-col-lg8">
								<button class="layui-btn layui-btn-normal" dtree-id="testTree" dtree-menu="moveDown">展开节点</button>
								<button class="layui-btn layui-btn-normal" dtree-id="testTree" dtree-menu="moveUp">收缩节点</button>
								<button class="layui-btn layui-btn-normal" dtree-id="testTree" dtree-menu="searchNode">查找节点</button>
								<button class="layui-btn layui-btn-normal" dtree-id="testTree" dtree-menu="zdy">自定义</button>
							</div>
						</div>
					</div>
				</fieldset>
			</div> -->
			<div class="layui-fluid">
				<fieldset class="layui-elem-field layui-field-title" id="jdybjz">
					<legend>示例</legend>
					<div class="layui-field-box">
						<div class="layui-row layui-col-space10" style="margin-top: 10px;">
							<div class="layui-col-lg12">
								<div class="layui-form layui-form-panel">
									<div class="layui-form-item">
										<label class="layui-form-label">城市：</label>
										<div class="layui-input-block">
											<div class="layui-unselect layui-form-select" id="city">
												<div class="layui-select-title">
													<input type="text" name="city" id="input_city" placeholder="请选择" readonly="" class="layui-input layui-unselect">
													<i class="layui-edge"></i>
												</div>
											</div>
											<div class="layui-card" id="test">
												<div class="layui-card-body">
													<div id="toolbarDiv"><ul id="testTree" class="dtree" data-id="0" style="width: 100%;"></ul></div>
												</div>
											</div>
											
										</div>
									</div>
																		<div class="layui-form-item">
										<label class="layui-form-label">用户名：</label>
										<div class="layui-input-block">
											<input type="text" id="nodeId" name="nodeId" class="layui-input"/>
										</div>
									</div>
									<div class="layui-form-item">
										<label class="layui-form-label">性别：</label>
										<div class="layui-input-block">
											<select>
												<option>男</option>
												<option>女</option>
											</select>
										</div>
									</div>
									
									<div class="layui-form-item">
										<label class="layui-form-label">备注：</label>
										<div class="layui-input-block">
											<input type="text" id="level" name="level" class="layui-input"/>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</fieldset>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript">
	layui.extend({
		dtree: '{/}../layui_ext/dtree/dtree'
	}).use(['element','layer', 'table', 'code' ,'util', 'dtree', 'form'], function(){
		var element = layui.element,
			layer = layui.layer,
			table = layui.table,
			util = layui.util,
			dtree = layui.dtree,
			form = layui.form,
			$ = layui.$;
		
		
		layui.code();	// 代码修饰器
		util.fixbar();	// 置顶按钮
		
		if(document.location.protocol != "http:" && document.location.protocol != "https:") {
		    layer.msg("如需要使用异步加载，则需要将项目发布到服务器",{icon:7});
		}
		
		/* var DTree;
		element.on("tab(demo)", function(data){
			console.log(typeof DTree);
			if(typeof DTree !== 'object'){
				DTree = dtree.render({
					elem: "#testTree",
					url: "../json/case/checkbarTree1.json",
					icon: "2",
					checkbar: true
				});
			} else {
				dtree.reload(DTree, {
					url: "../json/case/checkbarTree1.json",
				});
			}
			 
			DTree = dtree.render({
				elem: "#testTree",
				url: "../json/case/checkbarTree1.json",
				icon: "2",
				checkbar: true
			});
			
		}); */
		
		/* DTree = dtree.render({
			elem: "#testTree",
			url: "../json/case/checkbarTree1.json",
			icon: "2",
			checkbar: true,
			toolbar:true,
			toolbarShow:[],
			toolbarScroll:"#toolbarDiv",
			toolbarExt:[{toolbarId: "test",icon:"dtree-icon-wefill",title:"我是自定义",handler: function(node){layer.msg(JSON.stringify(node));}}],
			menubar:true,
			menubarTips:{
				toolbar:["moveDown","moveUp",{menubarId:"test1",icon:"dtree-icon-home1",title:"我是测试1",handler:function(node){layer.msg(JSON.stringify(node));}},{menubarId:"test2",icon:"dtree-icon-wefill",title:"我是测试2",handler:function(node){layer.msg(JSON.stringify(node));}}],
				freedom:[{menubarId:"zdy",handler:function(node){layer.msg(JSON.stringify(node));}}]
			}
		});
		
		dtree.on("changeTree(testTree)",function(obj){
			console.log(obj);
		});
		
		dtree.on("node(testTree)",function(obj){
			console.log(obj);
		}); */
		
		var DTree = dtree.render({
			elem: "#testTree",
			url: "../json/case/checkbarTree1.json",
			icon: "2"
		});
		
		$("#city").on("click",function(){
			$(this).toggleClass("layui-form-selected");
			$("#test").toggleClass("layui-show layui-anim layui-anim-upbit");
		});
		
		dtree.on("node(testTree)", function(obj){
			$("#input_city").val(obj.param.context);
			$("#city").toggleClass("layui-form-selected");
			$("#test").toggleClass("layui-show layui-anim layui-anim-upbit");
		});
	});
</script>
</html>